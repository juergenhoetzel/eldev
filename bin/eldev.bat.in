@echo off
REM Eldev --- Elisp Development Tool.
REM
REM Copyright (C) 2019-2021 Paul Pogonyshev
REM
REM Author:   Paul Pogonyshev <pogonyshev@gmail.com>
REM Homepage: https://github.com/doublep/eldev

setlocal

if "%ELDEV_EMACS%" == "" (
        if "%EMACS%" == "" (
                set ELDEV_EMACS=emacs
            ) else (
                set ELDEV_EMACS=%EMACS%
            )
    )

set ELDEV_CMD=%0

@[(eldev-bat-quote :init)]@

"%ELDEV_EMACS%" --batch --no-site-file --no-site-lisp ^
                --execute  @[(eldev-bat-quote :string (eldev-file-contents "bin/bootstrap.el.part" 0 1))]@  ^
                --execute "(kill-emacs (eldev-cli (append (cdr (member """--""" command-line-args)) nil)))" ^
                -- @[(eldev-bat-quote :args)]@
REM forward emacs exit status
exit /b %errorlevel%
